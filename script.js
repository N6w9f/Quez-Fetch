const category=document.querySelector("header .choose select"),howManyQuestions=document.querySelector("header p .how-many-questions"),h2=document.querySelector("main h2.question"),ul=document.querySelector("main ul"),confirmAnswer=document.querySelector("main button"),bullet=document.querySelector("main .bullet-time .bullet"),timer=document.querySelector("main .bullet-time .timer"),questions=new XMLHttpRequest;let activeQuestion=0;questions.onreadystatechange=function(){if(4===this.readyState&&200===this.status){let n,o=JSON.parse(this.response),i=o[category.value];function e(){bullet.innerHTML="";for(let e in i)span=document.createElement("span"),0==e&&span.classList.add("done"),bullet.append(span)}function t(){h2.textContent=i[activeQuestion].title,ul.innerHTML="";for(let e=1;e<=Object.keys(i[activeQuestion]).join(" ").match(/answer_\d/g).length;e++){const t=document.createElement("li"),n=document.createElement("input");n.type="radio",n.id=`answer_${e}`,1==e&&(n.checked=!0);const o=document.createElement("label");o.htmlFor=n.id,o.textContent=i[activeQuestion][n.id],t.append(n,o),ul.append(t)}let e=document.querySelectorAll("main ul li input");e.forEach((t=>{t.addEventListener("click",(function(){e.forEach((e=>{e.checked=!1})),this.checked=!0}))}))}howManyQuestions.textContent=i.length,category.onchange=()=>{i=o[category.value],howManyQuestions.textContent=i.length,e(),t(),timer.textContent=59,activeQuestion=0},e(),t(),confirmAnswer.onclick=function(){if(activeQuestion<10){const e=[...document.querySelectorAll("main ul li input")],o=[...document.querySelectorAll("main .bullet-time .bullet span")];e.forEach((e=>{1==e.checked&&(e.nextElementSibling.textContent==i[activeQuestion].correct_answer?o[activeQuestion].classList.add("correct"):o[activeQuestion].classList.add("wrong"))})),activeQuestion++,null!=o[activeQuestion]&&(o[activeQuestion].className="done",t()),timer.textContent=59,activeQuestion>9&&clearInterval(n)}},activeQuestion<8&&(n=setInterval((()=>{timer.textContent--,0==timer.textContent&&(9==activeQuestion&&clearInterval(n),timer.textContent=59,confirmAnswer.click())}),1e3))}},questions.open("GET","./record/html_questions.json",!0),questions.send();